<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão Interna - StoreManager</title>
    <link rel="stylesheet" href="../css/estoque.css">
    <link rel="stylesheet" href="../css/graficosGestaoInterna.css">
</head>

<body>
    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <div class="logo-icon">RTR</div>
                <div class="logo-text">StoreManager</div>
            </div>
            <nav class="main-navigation">
                <button class="nav-button active" onclick="location.href='gestao_interna.html'">Gestão Interna</button>
                <button class="nav-button" onclick="location.href='analytics.html'">Analytics</button>
                <button class="nav-button" onclick="location.href='estoque.html'">Estoque</button>
                <button class="nav-button" onclick="location.href='loja.html'">Lojas</button>
                <button class="nav-button" onclick="location.href='gestao_user.html'">Usuários</button>
            </nav>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="dashboard-container">

        <!-- === KPIs Principais (Uma caixa só) === -->
        <section class="kpis-section">
            <div class="kpis-box">
                <div class="kpi-group">
                    <div class="kpi-card">
                        <h4 class="kpi-card-title">Cartas — KPIs do Dia</h4>
                        <div class="kpi-content">
                            <div class="kpi-item">
                                <span class="kpi-label">Total no Sistema:</span>
                                <span id="kpi-total-cartas" class="kpi-value primary">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Vendidas Hoje:</span>
                                <span id="kpi-vendidas-hoje" class="kpi-value primary">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Cadastradas Hoje:</span>
                                <span id="kpi-cadastradas-hoje" class="kpi-value primary">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <h4 class="kpi-card-title">KPIs – Booster Boxes</h4>
                        <div class="kpi-content">
                            <div class="kpi-item">
                                <span class="kpi-label">Total no Sistema:</span>
                                <span id="kpi-boxes-total" class="kpi-value success">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Vendidas Hoje:</span>
                                <span id="kpi-boxes-vendidas-hoje" class="kpi-value success">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Cadastradas Hoje:</span>
                                <span id="kpi-boxes-cadastradas-hoje" class="kpi-value success">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <h4 class="kpi-card-title">Top Carta em Estoque</h4>
                        <div class="kpi-content">
                            <div class="kpi-item">
                                <span class="kpi-label">Carta:</span>
                                <span id="kpi-topcard-nome" class="kpi-value info">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Qtd. Atual:</span>
                                <span id="kpi-topcard-qtd" class="kpi-value info">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Vendas (30 dias):</span>
                                <span id="kpi-topcard-vendas" class="kpi-value info">--</span>
                            </div>
                        </div>
                    </div>

                    <div class="kpi-card">
                        <h4 class="kpi-card-title">Coleção Mais Vendida (30 dias)</h4>
                        <div class="kpi-content">
                            <div class="kpi-item">
                                <span class="kpi-label">Coleção:</span>
                                <span id="kpi-colecao-nome" class="kpi-value info">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Vendidas no mês:</span>
                                <span id="kpi-colecao-vendas" class="kpi-value info">--</span>
                            </div>
                            <div class="kpi-item">
                                <span class="kpi-label">Estoque atual:</span>
                                <span id="kpi-colecao-estoque" class="kpi-value info">--</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- === Gráficos e Listas === -->
        <section class="charts-container">

            <!-- Gráfico 1: Vendas -->
            <div class="chart-card" id="panoramaVendas">
                <div class="chart-header">
                    <h3 class="chart-title">Panorama de Vendas (Últimos Meses)</h3>
                    <div class="chart-filters">
                        <label>De:
                            <input type="month" id="sales-start-month">
                        </label>
                        <label>Até:
                            <input type="month" id="sales-end-month">
                        </label>
                        <button type="button" id="sales-filter-clear">Limpar Datas</button>
                    </div>
                </div>

                <!-- Layout com gráfico + controles lado a lado -->
                <div class="sales-chart-container">
                    <div class="sales-chart-wrapper">
                        <canvas id="salesChart"></canvas>
                    </div>

                    <div class="sales-products-panel">
                        <div class="products-panel-header">
                            <h4>Produtos (<span id="products-count">0</span>/8)</h4>
                            <button type="button" id="sales-product-clear" class="btn-clear-all">✕ Limpar</button>
                        </div>
                        <div class="products-list-container" id="products-list-container">
                            <!-- Botões de produtos gerados pelo JS -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gráfico 2: Investimento Total por Mês -->
            <div class="chart-card" id="investimentoTotal">
                <div class="chart-header">
                    <h3 class="chart-title">Investimento Total em Estoque por Mês</h3>
                    <div class="chart-filters">
                        <label>De:
                            <input type="month" id="inv-start-month">
                        </label>
                        <label>Até:
                            <input type="month" id="inv-end-month">
                        </label>
                        <button type="button" id="inv-filter-clear">Limpar</button>
                    </div>
                </div>
                <canvas id="investmentChart"></canvas>
            </div>

                <!-- Gráfico 3: Produtos mais Valiosos -->
            <div class="chart-card" id="topCards">
                <div class="chart-header">
                    <h3 class="chart-title">Produtos Mais Valiosos</h3>
                </div>
                <div class="top-cards-list" id="top-cards-list">
                    <p>Carregando cartas...</p>
                </div>
            </div>

            <!-- Gráfico 4: Produtos Envelhecendo -->
            <div class="chart-card" id="aquisicoesMensais">
                <div class="chart-header">
                    <h3 class="chart-title">Produtos Envelhecendo em Estoque</h3>
                </div>
                <div id="acq-details" class="acq-details"></div>
            </div>



        </section>
    </main>

    <!-- Chart.js Library -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Script principal -->
    <script src="../js/gestao.js"></script>

</body>

</html>