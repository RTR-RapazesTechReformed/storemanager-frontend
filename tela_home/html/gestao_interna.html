<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão Interna - StoreManager</title>

    <!-- CSS -->
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="stylesheet" href="/css/graficosGestaoInterna.css">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>

    <!-- Header Principal -->
    <header class="main-header">
        <div class="header-container">
            <div class="logo-container">
                <div class="logo-icon">
                    <p class="storeManagerTitutlo">STORE MANAGER</p>
                </div>
            </div>

            <!-- Navegação Principal -->
            <nav class="main-navigation">
                <button class="nav-button active" onclick="location.href='gestao_interna.html'">
                    <span class="nav-text">Gestão interna</span>
                </button>
                <button class="nav-button active" onclick="location.href='analytics.html'">
                    <span class="nav-text">Analytics</span>
                </button>
                <button class="nav-button" onclick="location.href='estoque.html'">
                    <span class="nav-text">Estoque</span>
                </button>
            </nav>
        </div>
    </header>

    <!-- Conteúdo Principal -->
    <main class="dashboard-container">

        <!-- === KPIs Principais === -->
        <aside class="financial-sidebar">
            <div class="financial-container sidebar-flex">
                <div class="financial-box primary-box">
                    <h4 class="financial-title">Total de Cartas em Estoque</h4>
                    <div id="company-cash" class="financial-value primary">--</div>
                </div>

                <div class="financial-box success-box">
                    <h4 class="financial-title">Total de Booster Boxes</h4>
                    <div id="semester-profit" class="financial-value success">--</div>
                </div>

                <div class="financial-box danger-box">
                    <h4 class="financial-title">Top Pokémon em Estoque</h4>
                    <div id="total-debts" class="financial-value danger">--</div>
                </div>
            </div>
        </aside>

        <!-- === Gráficos e Listas === -->
        <section class="charts-container">

            <!-- Gráfico 1: Vendas -->
            <div class="chart-card" id="panoramaVendas">
                <div class="chart-header">
                    <h3 class="chart-title">Panorama de Vendas (Últimos Meses)</h3>
                    <div class="chart-filters">
                        <label>De:
                            <input type="month" id="sales-start-month">
                        </label>
                        <label>Até:
                            <input type="month" id="sales-end-month">
                        </label>
                        <label>Produtos:
                            <select id="sales-product-filter" multiple size="3"></select>
                        </label>
                        <button type="button" id="sales-filter-clear">Limpar</button>
                        <button type="button" id="sales-product-clear">Limpar Produtos</button>
                    </div>
                </div>

                <canvas id="salesChart"></canvas>
            </div>

            <!-- Gráfico 2: Aquisições Mensais + Tabela -->
            <div class="chart-card" id="aquisicoesMensais">
                <div class="chart-header">
                    <h3 class="chart-title">Últimas Aquisições (APEX)</h3>

                    <div class="chart-filters">
                        <label>
                            De:
                            <input type="month" id="acq-start-month">
                        </label>
                        <label>
                            Até:
                            <input type="month" id="acq-end-month">
                        </label>
                        <button type="button" id="acq-filter-clear">Limpar</button>
                        <button type="button" id="acq-save">Salvar</button>
                    </div>
                </div>

                <!-- Gráfico -->
                <canvas id="collectionsChart"></canvas>

                <!-- Detalhes (agora com espaço real) -->
                <div id="acq-details" class="acq-details">
                    <!-- Tabela gerada pelo JS aparece aqui -->
                </div>
            </div>

            <!-- Gráfico 3: Envelhecimento -->
            <div class="chart-card" id="envelhecimentoEstoque">
                <div class="chart-header">
                    <h3 class="chart-title">Envelhecimento de Estoque</h3>
                    <div id="stock-aging-legend" class="chart-legend-right"></div>
                </div>
                <canvas id="weeklyChart"></canvas>
            </div>

            <!-- Produtos mais Valiosos -->
            <div class="chart-card" id="topCards">
                <h3 class="chart-title">Cartas Mais Valiosas (Mercado Atual)</h3>
                <div class="top-cards-list" id="top-cards-list">
                    <p>Carregando cartas...</p>
                </div>
            </div>

        </section>
    </main>

    <!-- Script principal -->
    <script src="/js/gestao.js"></script>

</body>

</html>